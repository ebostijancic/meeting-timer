{"remainingRequest":"/home/opam/dev/stand-up-manager/node_modules/babel-loader/lib/index.js!/home/opam/dev/stand-up-manager/node_modules/ts-loader/index.js??ref--13-2!/home/opam/dev/stand-up-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/opam/dev/stand-up-manager/src/components/Pool.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/opam/dev/stand-up-manager/src/components/Pool.vue","mtime":1530825383849},{"path":"/home/opam/dev/stand-up-manager/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/home/opam/dev/stand-up-manager/node_modules/babel-loader/lib/index.js","mtime":1526583314000},{"path":"/home/opam/dev/stand-up-manager/node_modules/ts-loader/index.js","mtime":1528433923000},{"path":"/home/opam/dev/stand-up-manager/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _objectSpread from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/classCallCheck\";\nimport _inherits from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/inherits\";\nimport _createClass from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/createClass\";\nimport _possibleConstructorReturn from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/opam/dev/stand-up-manager/node_modules/@babel/runtime/helpers/builtin/es6/getPrototypeOf\";\nimport * as tslib_1 from \"tslib\";\n\nvar _a, _b, _c, _d;\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport Stopwatch from '../factories/Stopwatch';\nimport TimeUtils from '../utils/TimeUtils';\nimport Person from '../interfaces/Person';\nimport PersonService from '../services/PersonService';\n\nvar Pool =\n/*#__PURE__*/\nfunction (_Vue) {\n  function Pool() {\n    var _this;\n\n    _classCallCheck(this, Pool);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Pool).apply(this, arguments));\n    _this.stopwatch = new Stopwatch();\n    _this.personService = new PersonService();\n    return _this;\n  }\n\n  _createClass(Pool, [{\n    key: \"toggle\",\n    value: function toggle() {\n      if (this.person.talking === false) {\n        this.setTalkingPerson(this.person);\n        this.startTalking();\n      } else {\n        this.setTalkingPerson(PersonService.createPerson());\n        this.stopTalking();\n      }\n    }\n  }, {\n    key: \"removePool\",\n    value: function removePool(person, event) {\n      this.setTalkingPerson(PersonService.createPerson()); // will create empty person\n\n      this.stopTalking();\n      this.removePerson(person);\n      event.stopPropagation();\n    }\n  }, {\n    key: \"updateCurrentTimeInSeconds\",\n    value: function updateCurrentTimeInSeconds(time) {\n      if (this.talkingPerson.name !== '' && this.talkingPerson.name === this.person.name) {\n        this.personService.change(this.person, _objectSpread({}, this.person, {\n          currentTimeInSeconds: Number(time).toFixed(0)\n        }));\n      } else {\n        this.stopTalking();\n      }\n    }\n  }, {\n    key: \"startTalking\",\n    value: function startTalking() {\n      var _this2 = this;\n\n      if (this.stopwatch.isRunning() === false) {\n        this.personService.change(this.person, _objectSpread({}, this.person, {\n          talking: true\n        }));\n        this.stopwatch.start(function (time) {\n          _this2.updateCurrentTimeInSeconds(time);\n        });\n      }\n    }\n  }, {\n    key: \"stopTalking\",\n    value: function stopTalking() {\n      if (this.stopwatch.isRunning() === true) {\n        this.personService.change(this.person, _objectSpread({}, this.person, {\n          talking: false\n        }));\n        this.stopwatch.stop();\n      }\n    }\n  }, {\n    key: \"currentTimeInHHmmss\",\n    get: function get() {\n      return TimeUtils.getCurrentTimeInHHmmss(Number(this.person.currentTimeInSeconds), this.timeLimitInSeconds, true);\n    }\n  }, {\n    key: \"overtimeTimeInHHmmss\",\n    get: function get() {\n      return TimeUtils.getOvertimeInHHmmss(Number(this.person.currentTimeInSeconds), this.timeLimitInSeconds, true);\n    }\n  }, {\n    key: \"currentTimeInPercentage\",\n    get: function get() {\n      var timeLimit = 0;\n\n      if (this.stopwatch.getTime() > 0) {\n        timeLimit = this.stopwatch.getTime();\n        timeLimit = timeLimit / this.timeLimitInSeconds;\n        timeLimit = timeLimit * 100;\n        return timeLimit.toFixed(0) + '%';\n      }\n\n      return '0%';\n    }\n  }]);\n\n  _inherits(Pool, _Vue);\n\n  return Pool;\n}(Vue);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", typeof (_a = typeof Person !== \"undefined\" && Person) === \"function\" && _a || Object)], Pool.prototype, \"person\", void 0);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", Number)], Pool.prototype, \"timeLimitInSeconds\", void 0);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", typeof (_b = typeof Person !== \"undefined\" && Person) === \"function\" && _b || Object)], Pool.prototype, \"talkingPerson\", void 0);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", typeof (_c = typeof Function !== \"undefined\" && Function) === \"function\" && _c || Object)], Pool.prototype, \"setTalkingPerson\", void 0);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", typeof (_d = typeof Function !== \"undefined\" && Function) === \"function\" && _d || Object)], Pool.prototype, \"removePerson\", void 0);\n\ntslib_1.__decorate([Prop(), tslib_1.__metadata(\"design:type\", Boolean)], Pool.prototype, \"onlySetter\", void 0);\n\nPool = tslib_1.__decorate([Component], Pool);\nexport default Pool;",{"version":3,"sources":["/home/opam/dev/stand-up-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/opam/dev/stand-up-manager/src/components/Pool.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport Stopwatch, { StopwatchCallback } from '../factories/Stopwatch';\nimport TimeUtils from '../utils/TimeUtils';\nimport Person from '../interfaces/Person';\nimport PersonService from '../services/PersonService';\n\n@Component\nexport default class Pool extends Vue {\n  @Prop() private person!: Person;\n  @Prop() private timeLimitInSeconds!: number;\n  @Prop() private talkingPerson!: Person;\n  @Prop() private setTalkingPerson!: Function;\n  @Prop() private removePerson!: Function;\n  @Prop() private onlySetter !: boolean; // in case of remote control\n\n  private stopwatch = new Stopwatch();\n  private personService = new PersonService();\n\n  private toggle(): void {\n    if (this.person.talking === false) {\n      this.setTalkingPerson(this.person); \n      this.startTalking(); \n    } else {\n      this.setTalkingPerson(PersonService.createPerson());\n      this.stopTalking();\n    }\n  }\n\n  private removePool(person: Person, event: Event) {\n    this.setTalkingPerson(PersonService.createPerson()); // will create empty person\n    this.stopTalking();\n    this.removePerson(person);\n\n    event.stopPropagation();\n  }\n\n  private updateCurrentTimeInSeconds(time: number): void {\n    if (this.talkingPerson.name !== '' && this.talkingPerson.name === this.person.name) {\n      this.personService.change(this.person, { ...this.person, currentTimeInSeconds: Number(time).toFixed(0) });\n    } else {\n      this.stopTalking();\n    }\n  }\n\n  private startTalking() {\n    if (this.stopwatch.isRunning() === false) {\n      this.personService.change(this.person, { ...this.person, talking:  true });\n      this.stopwatch.start((time: number) => {\n        this.updateCurrentTimeInSeconds(time);\n      });\n    }\n  }\n\n  private stopTalking() {\n    if (this.stopwatch.isRunning() === true) {      \n      this.personService.change(this.person, { ...this.person, talking:  false });\n      this.stopwatch.stop();\n    }\n  }\n\n  private get currentTimeInHHmmss(): string {\n    return TimeUtils.getCurrentTimeInHHmmss(Number(this.person.currentTimeInSeconds), this.timeLimitInSeconds, true);\n  }\n\n  private get overtimeTimeInHHmmss(): string {    \n    return TimeUtils.getOvertimeInHHmmss(Number(this.person.currentTimeInSeconds), this.timeLimitInSeconds, true);\n  }\n\n  private get currentTimeInPercentage(): string {\n    let timeLimit: number = 0;\n    \n    if (this.stopwatch.getTime() > 0) {\n      timeLimit = this.stopwatch.getTime();\n      timeLimit = timeLimit / this.timeLimitInSeconds;\n      timeLimit = timeLimit * 100;\n      return timeLimit.toFixed(0) + '%';\n    } \n    return '0%';\n  }\n}\n"],"sourceRoot":""}]}